<!DOCTYPE html>
<html>
    <head>
        <title>App9</title>
        <style>
            canvas {
                background:#fff;
                border:2px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas" height="300" width="300"></canvas>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
             var c = document.getElementById("canvas");
             var ctx = c.getContext("2d");

             /*$(document).keydown(function(e) {
                 if(e.which == 37 | e.which == 39) {
                     ctx.clearRect(0,0,c.width,c.height);
                     requestAnimationFrame(drawCharacter);
                     
                 }
                 switch(e.which) {
                    case 37: // left
                        draw(x--,c.height/2);
                        break;
            
                    case 39: // right
                        draw(x++,c.height/2);
                        break;
            
                    default: return; // exit this handler for other keys
                }
                e.preventDefault(); // prevent the default action (scroll / move caret)
            });
            
            function draw(x,y) {
                var xpos = x;
                var ypos = y;
                
                //var rad = Math.floor(Math.random() * (100 - 15 + 1)) + 15;
                
                
                var hue = "rgba(300,200,100,1)";
                ctx.beginPath();
                ctx.arc(xpos,ypos,10,0,2*Math.PI);
                ctx.fillStyle = hue;
                ctx.fill();
                ctx.strokeStyle="rgba(255,255,255,0)";
                ctx.stroke();
            }
            
            function drawCharacter() {
                var y = 0;
                var xPos = Math.floor(Math.random() * (c.width - 0 + 1)) + 1;
                var yPos = y++;
                var img =new Image();
                img.onload=function(){
                  ctx.drawImage(img,xPos,yPos);
                }
                img.src = "https://orig00.deviantart.net/0879/f/2013/227/1/9/gs___madoka_attack_1_sprite_sheet_by_konbe-d6iceyx.gif";
                
                requestAnimationFrame(drawCharacter);
            }*/
            
            var x = 0;
            var y = c.height - 100;
            
            mc(x,y);
            harm();
            benefit();
            
            //ctx.clearRect(xPos,yPos,50,50);
            
            $(document).keydown(function(e) {
                ctx.clearRect(0,0,c.width,c.height);
                 switch(e.which) {
                    case 37: // left
                        x-=5;
                        mc(x,y);
                        break;
            
                    case 39: // right
                        x+=5;
                        mc(x,y);
                        break;
            
                    default: return; // exit this handler for other keys
                }
                
                if(x > c.width) {
                    x = -100;
                }
                else if (x < 0) {
                    x = 0;
                }
                
                detectHit();
                
                e.preventDefault(); // prevent the default action (scroll / move caret)
            });
            
            function mc(x,y) {
                var img = new Image();
                
                img.src = "https://24.media.tumblr.com/92e72aba50aaf642921b1c2636540881/tumblr_mnb0sun4SX1s96b9jo1_500.gif";
                
                ctx.drawImage(img, x, y, 100, 100);
            }

            //var benefit = new Image();
            //benefit.src = "https://i.pinimg.com/originals/08/6f/3f/086f3f656f14ed7c32c048e33137c7c8.gif";
            
            var harmX = Math.floor(Math.random() * (c.width - 0));
            var harmY = 0;
            var benefitX = Math.floor(Math.random() * (c.width - 0));
            var benefitY = 0;
                
            function harm() {
                ctx.clearRect(harmX,harmY,50,50);
                
                var harmImg = new Image();
                harmImg.src = "https://i.pinimg.com/originals/22/87/33/228733961fa9fb474132fdd4a089efbc.gif";
                
                ctx.drawImage(harmImg,harmX,harmY,50,50);   
                harmY += 1;
                //console.log(yPos);
                if (harmY > c.height) {
                  harmY=-50;
                  harmX = Math.floor(Math.random() * (c.width - 0));
                }
                
               requestAnimationFrame(harm);
               
            }
            
            function benefit() {
                ctx.clearRect(benefitX,benefitY,50,50);
                
                var benefitImg = new Image();
                benefitImg.src = "https://i.pinimg.com/originals/08/6f/3f/086f3f656f14ed7c32c048e33137c7c8.gif";
                
                ctx.drawImage(benefitImg,benefitX,benefitY,50,50);   
                benefitY += 1;
                //console.log(yPos);
                if (benefitY > c.height) {
                  benefitY=-50;
                  benefitX = Math.floor(Math.random() * (c.width - 0));
                }
               
               requestAnimationFrame(benefit);
               
            }
            
            function detectHit() {
                var a = mc;
                var b = harm;
                
                console.log(harmX + '/' + x);
                
                if (harmX == x) {
                    alert('fuck');
                }
            };
            
            /*function animate() {
              ctx.clearRect(0, 0, c.width, c.height);  // clear canvas
              ctx.drawImage(mc, x, y, 100, 100);                       // draw image at current position
              x += 1;
              if (x > c.width) {
                  x = -100;
              }
              requestAnimationFrame(animate); 
            }*/
        </script>
    </body>
</html>